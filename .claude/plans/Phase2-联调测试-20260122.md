# FusionXPay 后台管理系统 - 联调测试计划

## 概述

完成前后端联调测试，确保 FusionXPay 后台管理系统正常工作。

## 前置条件

### 后端服务启动顺序

```bash
cd /Users/manho/src/FusionXPay

# 1. 启动基础设施 (Docker)
docker-compose up -d mysql redis rabbitmq

# 2. 启动 Eureka 服务发现
cd services/eureka-server && mvn spring-boot:run

# 3. 启动 admin-service
cd services/admin-service && mvn spring-boot:run
```

### 前端启动

```bash
cd /Users/manho/src/fusionxpay-web
npm run dev
```

## 测试用例

### 1. 登录功能

| 测试项 | 预期结果 |
|--------|---------|
| Admin 登录 | 登录成功，跳转到订单列表 |
| Merchant 登录 | 登录成功，跳转到订单列表 |
| 错误密码 | 显示错误提示 |
| Token 过期 | 自动跳转到登录页 |

**测试账户:**
- Admin: `admin@fusionxpay.com` / `admin123`
- Merchant: `merchant@example.com` / `merchant123`

### 2. 订单列表

| 测试项 | 预期结果 |
|--------|---------|
| 列表加载 | 正确显示订单数据 |
| 分页 | 翻页正常工作 |
| 状态筛选 | 按状态筛选正确 |
| 日期筛选 | 按日期范围筛选正确 |

### 3. 订单详情

| 测试项 | 预期结果 |
|--------|---------|
| 详情加载 | 正确显示订单信息 |
| JSON 展示 | 原始网关响应正确格式化 |
| 返回列表 | 正确返回订单列表 |

### 4. 权限控制

| 测试项 | 预期结果 |
|--------|---------|
| Admin 查看订单 | 可查看所有商户订单 |
| Merchant 查看订单 | 只能查看自己的订单 |

## 集成测试

### 创建测试订单

```bash
# 通过 payment-service 创建订单
curl -X POST http://localhost:8081/api/payment/create \
  -H "Content-Type: application/json" \
  -d '{
    "merchantId": "merchant001",
    "amount": 100.00,
    "currency": "USD",
    "provider": "stripe",
    "description": "Test order"
  }'
```

### 验证订单显示

1. 登录后台管理系统
2. 查看订单列表
3. 验证新创建的订单是否显示
4. 点击查看订单详情

## 问题记录

| 问题 | 状态 | 解决方案 |
|------|------|---------|
| - | - | - |

## 完成标准

- [ ] 所有登录测试用例通过
- [ ] 所有订单列表测试用例通过
- [ ] 所有订单详情测试用例通过
- [ ] 权限控制正确
- [ ] 集成测试通过
